{% extends "base.html" %}

{% load static %}

{% block content %}

<head>
  <!-- Title -->
  <title>Mush! - Products</title>

  <!-- CSS Implementing Plugins -->
  <link rel="stylesheet" href="{% static 'v2/vendor/icon-set/style.css' %}">
  <link rel="stylesheet" href="{% static 'v2/vendor/select2/dist/css/select2.min.css' %}">
  <link rel="stylesheet" href="{% static 'v2/vendor/@yaireo/tagify/dist/tagify.css' %}">

  <!-- CSS Front Template -->
  <link rel="stylesheet" href="{% static 'v2/css/theme.min.css' %}">

  <!--Bootstrap CSS-->
  <link rel="stylesheet" href="{% static 'css/bootstrap.css' %}">

  <style>
    .footer {
      display: none;
    }
  </style>
  <!--JS-->
  <script src="{% static 'js/jquery.js' %}"></script>
  <script src="{% static 'js/owl.carousel.min.js' %}"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
  <script src="{% static 'js/bootstrap.js' %}"></script>
  <script src="{% static 'js/apis_handler.js' %}"></script>
</head>

<body class="has-navbar-vertical-aside navbar-vertical-aside-show-xl footer-offset">

  <!-- End Navbar Vertical -->

  <main id="" role="main" class="">
    <!-- Content -->
    <div class="content container-fluid">
      <!-- Page Header -->
      <div class="page-header">
        <div class="col-sm-auto mt-10">
          <a class="btn btn-primary" href="add-product.html">Add product</a>
        </div>
      </div>
      <!-- End Row -->

      <!-- Nav Scroller -->
      <div class="js-nav-scroller hs-nav-scroller-horizontal">
        <span class="hs-nav-scroller-arrow-prev" style="display: none;">
          <a class="hs-nav-scroller-arrow-link" href="javascript:;">
            <i class="tio-chevron-left"></i>
          </a>
        </span>

        <span class="hs-nav-scroller-arrow-next" style="display: none;">
          <a class="hs-nav-scroller-arrow-link" href="javascript:;">
            <i class="tio-chevron-right"></i>
          </a>
        </span>

        <!-- Nav -->
        <ul class="nav nav-tabs page-header-tabs" id="pageHeaderTab" role="tablist">
          <li class="nav-item">
            <a class="nav-link active" href="#">All products</a>
          </li>
        </ul>
        <!-- End Nav -->
      </div>
      <!-- End Nav Scroller -->
    </div>
    <!-- End Page Header -->

    <div class="row justify-content-end mb-3">
      <div class="col-lg">
        <!-- Datatable Info -->
        <div id="datatableCounterInfo" style="display: none;">
          <div class="d-sm-flex justify-content-lg-end align-items-sm-center">
            <span class="d-block d-sm-inline-block font-size-sm mr-3 mb-2 mb-sm-0">
              <span id="datatableCounter">0</span>
              Selected
            </span>
            <a class="btn btn-sm btn-outline-danger mb-2 mb-sm-0 mr-2" href="javascript:;">
              <i class="tio-delete-outlined"></i> Delete
            </a>
          </div>
        </div>
        <!-- End Datatable Info -->
      </div>
    </div>
    <!-- End Row -->

    <!-- Card -->
    <div class="card">
      <!-- Header -->

      <!-- Table -->
      <div class="table-responsive datatable-custom">
        <table id="datatable"
          class="table table-borderless table-thead-bordered table-nowrap table-align-middle card-table"
          data-hs-datatables-options='{
                     "columnDefs": [{
                        "targets": [0, 4, 9],
                        "width": "5%",
                        "orderable": false
                      }],
                     "order": [],
                     "info": {
                       "totalQty": "#datatableWithPaginationInfoTotalQty"
                     },
                     "search": "#datatableSearch",
                     "entries": "#datatableEntries",
                     "pageLength": 12,
                     "isResponsive": false,
                     "isShowPaging": false,
                     "pagination": "datatablePagination"
                   }'>
          <thead class="thead-light">
            <tr>
              <th scope="col" class="table-column-pr-0">
                <div class="">
                  <label class="" for=""></label>
                </div>
              </th>
              <th class="table-column-pl-0">Product</th>
              <th>Display on Dashboard</th>
              <th>Actions</th>
            </tr>
          </thead>
          <!-- Display product list START -->
          <tbody id="product_list_table">

          </tbody>
          <!-- Display product list END -->
        </table>
      </div>
      <!-- End Table -->

      <!-- Footer -->
      <!-- End Footer -->
    </div>
    <!-- End Card -->
    </div>
    <!-- End Content -->




    <!-- End Footer -->
  </main>
  <!-- ========== END MAIN CONTENT ========== -->

  <script src="{% static 'v2/vendor/hs-navbar-vertical-aside/hs-navbar-vertical-aside-mini-cache.js' %}"></script>

  <script>
    get_products();
    $(document).on('ready', function () {
      // =======================================================


      // BUILDER TOGGLE INVOKER
      // =======================================================
      $('.js-navbar-vertical-aside-toggle-invoker').click(function () {
        $('.js-navbar-vertical-aside-toggle-invoker i').tooltip('hide');
      });




      // INITIALIZATION OF NAVBAR VERTICAL NAVIGATION
      // =======================================================
      var sidebar = $('.js-navbar-vertical-aside').hsSideNav();


      // INITIALIZATION OF TOOLTIP IN NAVBAR VERTICAL MENU
      // =======================================================
      $('.js-nav-tooltip-link').tooltip({
        boundary: 'window'
      })

      $(".js-nav-tooltip-link").on("show.bs.tooltip", function (e) {
        if (!$("body").hasClass("navbar-vertical-aside-mini-mode")) {
          return false;
        }
      });


      // INITIALIZATION OF UNFOLD
      // =======================================================
      $('.js-hs-unfold-invoker').each(function () {
        var unfold = new HSUnfold($(this)).init();
      });


      // INITIALIZATION OF FORM SEARCH
      // =======================================================
      $('.js-form-search').each(function () {
        new HSFormSearch($(this)).init()
      });


      // INITIALIZATION OF NAV SCROLLER
      // =======================================================
      $('.js-nav-scroller').each(function () {
        new HsNavScroller($(this)).init()
      });


      // INITIALIZATION OF SELECT2
      // =======================================================
      $('.js-select2-custom').each(function () {
        var select2 = $.HSCore.components.HSSelect2.init($(this));
      });


      // INITIALIZATION OF DATATABLES
      // =======================================================
      var datatable = $.HSCore.components.HSDatatables.init($('#datatable'), {
        select: {
          style: 'multi',
          selector: 'td:first-child input[type="checkbox"]',
          classMap: {
            checkAll: '#datatableCheckAll',
            counter: '#datatableCounter',
            counterInfo: '#datatableCounterInfo'
          }
        },
        language: {
          zeroRecords: '<div class="text-center p-4">' +
            '<img class="mb-3" src="assets/v2/svg/illustrations/sorry.svg" alt="Image Description" style="width: 7rem;">' +
            '<p class="mb-0">No data to show</p>' +
            '</div>'
        }
      });

      $('.js-datatable-filter').on('change', function () {
        var $this = $(this),
          elVal = $this.val(),
          targetColumnIndex = $this.data('target-column-index');

        datatable.column(targetColumnIndex).search(elVal).draw();
      });

      $('#datatableSearch').on('mouseup', function (e) {
        var $input = $(this),
          oldValue = $input.val();

        if (oldValue == "") return;

        setTimeout(function () {
          var newValue = $input.val();

          if (newValue == "") {
            // Gotcha
            datatable.search('').draw();
          }
        }, 1);
      });

      $('#toggleColumn_product').change(function (e) {
        datatable.columns(1).visible(e.target.checked)
      })

      $('#toggleColumn_type').change(function (e) {
        datatable.columns(2).visible(e.target.checked)
      })

      datatable.columns(3).visible(false)

      $('#toggleColumn_vendor').change(function (e) {
        datatable.columns(3).visible(e.target.checked)
      })

      $('#toggleColumn_stocks').change(function (e) {
        datatable.columns(4).visible(e.target.checked)
      })

      $('#toggleColumn_sku').change(function (e) {
        datatable.columns(5).visible(e.target.checked)
      })

      $('#toggleColumn_price').change(function (e) {
        datatable.columns(6).visible(e.target.checked)
      })

      datatable.columns(7).visible(false)

      $('#toggleColumn_quantity').change(function (e) {
        datatable.columns(7).visible(e.target.checked)
      })

      $('#toggleColumn_variants').change(function (e) {
        datatable.columns(8).visible(e.target.checked)
      })


      // INITIALIZATION OF TAGIFY
      // =======================================================
      $('.js-tagify').each(function () {
        var tagify = $.HSCore.components.HSTagify.init($(this));
      });
    });
  </script>
  </script>
</body>

{% endblock %}